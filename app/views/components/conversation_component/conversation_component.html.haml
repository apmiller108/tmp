.conversation.conversation-container{ data: { controller: :conversation } }
  .title.d-flex.justify-content-center
    .title-field.d-flex.justify-content-center.align-items-center
      .fw-bold= truncate(conversation.title, length: 40, separator: ' ')
      %button.btn.icon-btn.icon-btn-sm{ data: { action: 'click->conversation#editTitle:prevent',
                                                        'conversation-target' => 'editTitleButton',
                                                        'bs-toggle' => 'tooltip',
                                                        'bs-title' => 'edit title' } }
        %i.bi.bi-pencil-square
    = form_with model: [current_user, conversation], class: 'd-none' do |form|
      .d-flex.justify-content-center.align-items-center
        = form.text_field :title, class: 'form-control'
        %button.btn.icon-btn.icon-btn-sm{ type: :submit, name: :save, data: { 'bs-toggle' => 'tooltip', 'bs-title' => 'save title' }}
          %i.bi.bi-floppy
  #conversation-turns.conversation-turns.mb-2{ data: { 'conversation-target': 'turns' }}
    - conversation.turns.each do |t|
      = render ConversationTurnComponent.new(t)
  = render PromptFormComponent.new(generate_text_request:) do |c|
    - if deletable?
      - c.with_delete_button do
        = link_to [current_user, conversation], data: { turbo_method: 'delete', turbo_confirm: 'Are you sure?',
                                                'bs-toggle' => 'tooltip', 'bs-title' => t('conversation.delete') },
                                                class: 'btn btn-danger icon-btn' do
          %i.bi.bi-trash3.text-white
